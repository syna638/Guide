<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Guide - Smart Civic Connect Guide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                </svg>
                SCC Guide
            </a>
            <button class="nav-toggle" onclick="toggleNav()">‚ò∞</button>
            <div class="nav-links" id="navLinks">
                <a href="index.html" class="nav-link">Home</a>
                <a href="overview.html" class="nav-link">Project Overview</a>
                <a href="concepts.html" class="nav-link">Tech Concepts</a>
                <a href="setup.html" class="nav-link active">Setup Guide</a>
                <a href="architecture.html" class="nav-link">Architecture</a>
                <a href="interview.html" class="nav-link">Interview Prep</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
        <h1>Setup Guide</h1>
        <p>Step-by-step instructions to get Smart Civic Connect running</p>
    </header>

    <div class="container">

        <!-- Prerequisites -->
        <section class="content">
            <h2>üìã Prerequisites</h2>
            <p>Before you begin, make sure you have the following installed on your computer:</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Requirement</th>
                            <th>Minimum Version</th>
                            <th>How to Check</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Node.js</strong></td>
                            <td>18.17 or higher</td>
                            <td>Run <code>node -v</code> in terminal</td>
                        </tr>
                        <tr>
                            <td><strong>npm</strong></td>
                            <td>9.x or higher</td>
                            <td>Run <code>npm -v</code> in terminal</td>
                        </tr>
                        <tr>
                            <td><strong>Git</strong></td>
                            <td>Any recent version</td>
                            <td>Run <code>git --version</code></td>
                        </tr>
                        <tr>
                            <td><strong>Text Editor</strong></td>
                            <td>VS Code recommended</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="info-box note">
                <div class="info-box-title">üìò Don't have these installed?</div>
                <p>
                    <strong>Node.js:</strong> Download from <a href="https://nodejs.org"
                        target="_blank">nodejs.org</a><br>
                    <strong>Git:</strong> Download from <a href="https://git-scm.com"
                        target="_blank">git-scm.com</a><br>
                    <strong>VS Code:</strong> Download from <a href="https://code.visualstudio.com"
                        target="_blank">code.visualstudio.com</a>
                </p>
            </div>
        </section>

        <!-- Step 1: Get the Code -->
        <section class="content">
            <h2>Step 1: Get the Code</h2>

            <h3>Option A: Clone from GitHub</h3>
            <p>If the project is on GitHub, open your terminal and run:</p>
            <pre><code># Navigate to where you want the project
cd Desktop

# Clone the repository (replace URL with actual repository URL)
git clone https://github.com/username/smart-civic-connect.git

# Enter the project folder
cd smart-civic-connect</code></pre>

            <h3>Option B: Extract from ZIP</h3>
            <p>If you received the project as a ZIP file:</p>
            <ol>
                <li>Extract the ZIP file to a folder (e.g., Desktop)</li>
                <li>Open terminal and navigate to the folder</li>
            </ol>
            <pre><code>cd Desktop/SCC</code></pre>
        </section>

        <!-- Step 2: Install Dependencies -->
        <section class="content">
            <h2>Step 2: Install Dependencies</h2>

            <p>The project uses many external packages (libraries). Install them by running:</p>

            <pre><code>npm install</code></pre>

            <p>This will:</p>
            <ul>
                <li>Read <code>package.json</code> to see what packages are needed</li>
                <li>Download all packages to a <code>node_modules</code> folder</li>
                <li>Take 1-3 minutes depending on your internet speed</li>
            </ul>

            <div class="info-box warning">
                <div class="info-box-title">‚ö†Ô∏è Common Issues</div>
                <p>
                    <strong>Error during install?</strong><br>
                    Try: <code>npm cache clean --force</code> then <code>npm install</code> again.<br><br>
                    <strong>Permission errors?</strong><br>
                    On Mac/Linux, try: <code>sudo npm install</code>
                </p>
            </div>
        </section>

        <!-- Step 3: Create Service Accounts -->
        <section class="content">
            <h2>Step 3: Create Service Accounts</h2>

            <p>Smart Civic Connect uses two external services. You need to create free accounts on both:</p>

            <div class="card-grid">
                <div class="card">
                    <div class="card-icon">üîê</div>
                    <h3>Clerk</h3>
                    <p>Handles citizen login/signup</p>
                    <p><a href="https://clerk.com" target="_blank">Create account at clerk.com ‚Üí</a></p>
                </div>

                <div class="card">
                    <div class="card-icon">üóÑÔ∏è</div>
                    <h3>Supabase</h3>
                    <p>Provides database and file storage</p>
                    <p><a href="https://supabase.com" target="_blank">Create account at supabase.com ‚Üí</a></p>
                </div>
            </div>

            <h3>Setting Up Clerk</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-title">Create a Clerk Application</div>
                    <div class="step-content">
                        <p>After signing up, click "Add application" in the Clerk Dashboard.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Get Your API Keys</div>
                    <div class="step-content">
                        <p>Go to <strong>API Keys</strong> in the sidebar. You'll need:</p>
                        <ul>
                            <li><code>NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY</code> - starts with <code>pk_</code></li>
                            <li><code>CLERK_SECRET_KEY</code> - starts with <code>sk_</code></li>
                        </ul>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Configure Redirect URLs</div>
                    <div class="step-content">
                        <p>Go to <strong>Paths</strong> ‚Üí <strong>Redirect URLs</strong> and add:</p>
                        <ul>
                            <li><code>http://localhost:3000</code> (for local development)</li>
                            <li>Your production URL later (e.g., <code>https://your-app.vercel.app</code>)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3>Setting Up Supabase</h3>
            <div class="steps">
                <div class="step">
                    <div class="step-title">Create a New Project</div>
                    <div class="step-content">
                        <p>Click "New Project" in the Supabase Dashboard. Choose a name, password, and region.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Get Your API Keys</div>
                    <div class="step-content">
                        <p>Go to <strong>Settings</strong> ‚Üí <strong>API</strong>. You'll need:</p>
                        <ul>
                            <li><code>Project URL</code> - Your Supabase URL</li>
                            <li><code>anon/public key</code> - Safe to expose publicly</li>
                            <li><code>service_role key</code> - Keep this secret!</li>
                        </ul>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Set Up Database Tables</div>
                    <div class="step-content">
                        <p>Go to <strong>SQL Editor</strong> and run the SQL files from the project's <code>sql/</code>
                            folder in this order:</p>
                        <ol>
                            <li><code>schema.sql</code> - Creates tables</li>
                            <li><code>rls-policies.sql</code> - Sets up security</li>
                            <li><code>seed.sql</code> - Adds initial data</li>
                            <li><code>storage-policies-clerk.sql</code> - Storage security</li>
                        </ol>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Create Storage Bucket</div>
                    <div class="step-content">
                        <p>Go to <strong>Storage</strong> and create a new bucket named <code>complaint-images</code>.
                            Make it <strong>public</strong>.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 4: Configure Environment -->
        <section class="content">
            <h2>Step 4: Configure Environment Variables</h2>

            <p>Environment variables are like secret settings that tell your app how to connect to services.</p>

            <h3>Create the .env file</h3>
            <p>Copy the example file to create your own:</p>
            <pre><code># On Windows (Command Prompt)
copy .env.example .env

# On Mac/Linux
cp .env.example .env</code></pre>

            <h3>Fill in Your Values</h3>
            <p>Open <code>.env</code> in your text editor and fill in each variable:</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Variable</th>
                            <th>Where to Get It</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>NEXT_PUBLIC_APP_URL</code></td>
                            <td>Use <code>http://localhost:3000</code> for now</td>
                        </tr>
                        <tr>
                            <td><code>NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY</code></td>
                            <td>Clerk Dashboard ‚Üí API Keys</td>
                        </tr>
                        <tr>
                            <td><code>CLERK_SECRET_KEY</code></td>
                            <td>Clerk Dashboard ‚Üí API Keys</td>
                        </tr>
                        <tr>
                            <td><code>CLERK_SIGN_IN_URL</code></td>
                            <td>Set to <code>/sign-in</code></td>
                        </tr>
                        <tr>
                            <td><code>CLERK_SIGN_UP_URL</code></td>
                            <td>Set to <code>/sign-up</code></td>
                        </tr>
                        <tr>
                            <td><code>CLERK_AFTER_SIGN_IN_URL</code></td>
                            <td>Set to <code>/home</code></td>
                        </tr>
                        <tr>
                            <td><code>CLERK_AFTER_SIGN_UP_URL</code></td>
                            <td>Set to <code>/home</code></td>
                        </tr>
                        <tr>
                            <td><code>NEXT_PUBLIC_SUPABASE_URL</code></td>
                            <td>Supabase Dashboard ‚Üí Settings ‚Üí API</td>
                        </tr>
                        <tr>
                            <td><code>NEXT_PUBLIC_SUPABASE_ANON_KEY</code></td>
                            <td>Supabase Dashboard ‚Üí Settings ‚Üí API</td>
                        </tr>
                        <tr>
                            <td><code>SUPABASE_SERVICE_ROLE_KEY</code></td>
                            <td>Supabase Dashboard ‚Üí Settings ‚Üí API</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Generate Admin Credentials</h3>
            <p>The admin account needs secure credentials. Run these commands to generate them:</p>

            <pre><code># Generate password hash (replace with your chosen password)
node scripts/generate-admin-hash.js "YourSecurePassword123!"

# Copy the output to ADMIN_PASSWORD_HASH in .env</code></pre>

            <pre><code># Generate JWT secret
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# Copy the output to ADMIN_JWT_SECRET in .env</code></pre>

            <p>Set <code>ADMIN_USERNAME</code> to whatever username you want (e.g., <code>admin</code>).</p>

            <div class="info-box danger">
                <div class="info-box-title">üö® Important Security Note</div>
                <p>Never share your <code>.env</code> file or commit it to Git! It contains secret keys that could
                    compromise your application.</p>
            </div>
        </section>

        <!-- Step 5: Run Locally -->
        <section class="content">
            <h2>Step 5: Run the Development Server</h2>

            <p>Now you're ready to start the application!</p>

            <pre><code>npm run dev</code></pre>

            <p>You should see output like:</p>
            <pre><code>‚ñ≤ Next.js 15.5.11
- Local:        http://localhost:3000
- Environments: .env

‚úì Starting...
‚úì Ready in 2.3s</code></pre>

            <h3>Open in Browser</h3>
            <p>Go to <a href="http://localhost:3000" target="_blank">http://localhost:3000</a> in your web browser.</p>

            <h3>Test the Application</h3>
            <div class="card-grid">
                <div class="card">
                    <div class="card-icon">üë§</div>
                    <h3>Test Citizen Login</h3>
                    <p>Click "Get Started" and create an account. Submit a test complaint.</p>
                </div>

                <div class="card">
                    <div class="card-icon">üîß</div>
                    <h3>Test Admin Login</h3>
                    <p>Go to <code>/admin/login</code> and use your admin credentials.</p>
                </div>
            </div>
        </section>

        <!-- Step 6: Deploy -->
        <section class="content">
            <h2>Step 6: Deploy to Production</h2>

            <p>When you're ready to make the app available online, deploy to Vercel:</p>

            <div class="steps">
                <div class="step">
                    <div class="step-title">Push Code to GitHub</div>
                    <div class="step-content">
                        <p>Create a GitHub repository and push your code (without the .env file!).</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Create Vercel Account</div>
                    <div class="step-content">
                        <p>Go to <a href="https://vercel.com" target="_blank">vercel.com</a> and sign up (you can use
                            your GitHub account).</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Import Project</div>
                    <div class="step-content">
                        <p>Click "Add New..." ‚Üí "Project" ‚Üí Select your GitHub repository.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Add Environment Variables</div>
                    <div class="step-content">
                        <p>Copy all variables from your <code>.env</code> file into Vercel's environment variables
                            section.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Deploy</div>
                    <div class="step-content">
                        <p>Click "Deploy" and wait for the build to complete. You'll get a URL like
                            <code>your-app.vercel.app</code>.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-title">Update Service URLs</div>
                    <div class="step-content">
                        <p>Update <code>NEXT_PUBLIC_APP_URL</code> in Vercel with your new domain. Also update Clerk and
                            Supabase with the new URL.</p>
                    </div>
                </div>
            </div>

            <div class="info-box tip">
                <div class="info-box-title">üí° Tip</div>
                <p>Vercel automatically redeploys when you push changes to GitHub. No manual deployment needed for
                    updates!</p>
            </div>
        </section>

        <!-- Troubleshooting -->
        <section class="content">
            <h2>üîß Troubleshooting</h2>

            <div class="accordion">
                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        npm install fails
                    </div>
                    <div class="accordion-content">
                        <ul>
                            <li>Check Node version: <code>node -v</code> (must be 18.17+)</li>
                            <li>Clear npm cache: <code>npm cache clean --force</code></li>
                            <li>Delete node_modules and try again: <code>rm -rf node_modules && npm install</code></li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        Environment variables not working
                    </div>
                    <div class="accordion-content">
                        <ul>
                            <li>Restart the server after changing <code>.env</code>: <code>Ctrl+C</code> then
                                <code>npm run dev</code></li>
                            <li>Check for typos and extra spaces around <code>=</code></li>
                            <li>Ensure file is named exactly <code>.env</code> (not <code>.env.txt</code>)</li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        Admin login fails
                    </div>
                    <div class="accordion-content">
                        <ul>
                            <li>Verify <code>ADMIN_PASSWORD_HASH</code> starts with <code>$2a$10</code></li>
                            <li>Make sure <code>ADMIN_USERNAME</code> matches exactly what you enter</li>
                            <li>Check <code>ADMIN_JWT_SECRET</code> is at least 32 characters</li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        Images not uploading
                    </div>
                    <div class="accordion-content">
                        <ul>
                            <li>Check that <code>complaint-images</code> bucket exists in Supabase</li>
                            <li>Ensure bucket is set to <strong>public</strong></li>
                            <li>Verify storage policies are applied from <code>storage-policies-clerk.sql</code></li>
                        </ul>
                    </div>
                </div>

                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        Database connection errors
                    </div>
                    <div class="accordion-content">
                        <ul>
                            <li>Double-check <code>NEXT_PUBLIC_SUPABASE_URL</code> and keys</li>
                            <li>Verify Supabase project is active (not paused)</li>
                            <li>Check that SQL files were run successfully</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Navigation -->
        <section class="content" style="text-align: center;">
            <p>
                <a href="concepts.html" style="margin-right: 1rem;">‚Üê Tech Concepts</a>
                <a href="architecture.html"
                    style="display: inline-block; background: linear-gradient(135deg, #2563eb, #0ea5e9); color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; text-decoration: none; font-weight: 600;">
                    Next: Architecture ‚Üí
                </a>
            </p>
        </section>

    </div>

    <!-- Footer -->
    <footer class="footer">
        <p><strong>Smart Civic Connect</strong> - Client Guide</p>
        <p>Developed by Syna Bhatnagar</p>
    </footer>

    <script>
        function toggleNav() {
            document.getElementById('navLinks').classList.toggle('open');
        }

        function toggleAccordion(header) {
            const item = header.parentElement;
            item.classList.toggle('open');
        }
    </script>

</body>

</html>